import { contextBridge, ipcRenderer } from 'electron';

interface ExposedValues extends ElectronApi {
  close: () => void;
  minimize: () => void;
  maximize: () => void;
}

const apiKey = 'electron';
/**
 * @see https://github.com/electron/electron/issues/21437#issuecomment-573522360
 */
const api: ExposedValues = {
  versions: process.versions,
  close: (): void => ipcRenderer.send('close-window'),
  minimize: (): void => ipcRenderer.send('window-minimize'),
  maximize: (): void  => ipcRenderer.send('window-maximize'),
};

/**
 * The "Main World" is the JavaScript context that your main renderer code runs in.
 * By default, the page you load in your renderer executes code in this world.
 *
 * @see https://www.electronjs.org/docs/api/context-bridge
 */
contextBridge.exposeInMainWorld(apiKey, api);
